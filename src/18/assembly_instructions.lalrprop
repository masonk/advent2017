
use advent2017::advent18::Val;
use advent2017::advent18::Inst;
use std::str::FromStr;

grammar;

pub Instruction: Inst {
    <s:Snd> => s,
}

Snd: Inst::Snd = {
    "snd\s+" <v: Val> => Inst::Snd(v)
}

Val: Val = { Lit, Addr }

Lit: Val::Lit = {
    <n:Num> => Val::Lit(n),
}

Addr: Val::Addr = {
    <c:Char> => Val::Reg(s);
}

Num: i32 = r"-?[0-9]+" => i32::from_str(<>).unwrap();
Char: char = <s:r"[a-z]"> => s[0];

